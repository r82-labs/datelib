# GitHub Pages Setup

This document explains how to enable GitHub Pages for the datelib repository to host the API documentation.

## Prerequisites

The repository must already have the documentation generation workflow configured (`.github/workflows/generate-docs.yml`).

## Automatic Setup (No Manual Configuration Required)

As of the latest update, this repository uses the official GitHub Pages deployment action (`actions/deploy-pages`), which **automatically configures GitHub Pages** when you run the documentation workflow. You do not need to manually configure anything in the repository settings.

## Setup Steps

### 1. Trigger Documentation Generation

Simply run the documentation workflow to generate and deploy the documentation:

1. Go to the **Actions** tab
2. Select **Generate Documentation** workflow
3. Click **Run workflow**
4. Select the branch (usually `main`)
5. Click **Run workflow**

This will:
- Generate the Doxygen documentation
- Automatically configure GitHub Pages (if not already configured)
- Deploy the documentation to GitHub Pages

### 2. Verify Deployment

Once the workflow completes, the documentation will be available at:

```
https://r82-labs.github.io/datelib/
```

You can check the deployment status:
1. Go to **Settings** → **Pages**
2. You should see "Your site is live at https://r82-labs.github.io/datelib/"
3. The Source should show "GitHub Actions"

## Automatic Updates

The documentation will be automatically updated when:
- A new release is published (via the release workflow)
- The documentation workflow is manually triggered

## Troubleshooting

### "There isn't a GitHub Pages site here" Error

If you see this error when visiting the documentation URL:

1. **Check the workflow status**: Go to the **Actions** tab and verify the "Generate Documentation" workflow completed successfully
2. **Wait for deployment**: The first deployment can take a few minutes after the workflow completes
3. **Check deployment status**: Go to Settings → Pages to see deployment status and confirm the source is set to "GitHub Actions"
4. **Re-run the workflow**: If the workflow failed, check the logs for errors and try running it again

### Documentation Not Updating

If the documentation isn't updating after running the workflow:

1. Go to **Actions** tab and check if the workflow completed successfully
2. Check the workflow logs for any errors
3. Verify the workflow has the correct permissions (pages: write, id-token: write)
4. Go to **Settings** → **Pages** and check the deployment status

### Permission Denied Errors

If the workflow fails with permission errors:

1. Go to **Settings** → **Actions** → **General**
2. Under "Workflow permissions", ensure the following permissions are enabled:
   - Read repository contents
   - Read and write permissions for GitHub Pages
3. Click **Save**
4. Re-run the workflow

## Migration from Old Setup

If you previously had GitHub Pages configured to deploy from the `gh-pages` branch, the new workflow will automatically migrate to using GitHub Actions for deployment. The old `gh-pages` branch can be safely deleted if desired, though it's not necessary as it won't interfere with the new deployment method.

## Additional Information

- The `.nojekyll` file in the documentation prevents GitHub Pages from processing the HTML with Jekyll
- The documentation is static HTML generated by Doxygen
- Each deployment completely replaces the previous documentation
- The workflow uses the official `actions/deploy-pages` action for deployment, which is the recommended method as of 2024
